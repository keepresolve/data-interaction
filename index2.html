<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="socket.io/socket.io.js"></script>
</head>
<body>
    <ul id="message">

    </ul>
    <input type="text">
    <button>发送</button>
    <script>
    var ul=document.getElementById('message')
    var btn=document.getElementsByTagName('button')[0]
    var inp=document.getElementsByTagName("input")[0]
        socket = io.connect('ws://127.0.0.1:3000');
          btn.onclick=function(){
               socket.emit("message", { "msg" : inp.value});  
            }
        // socket.emit("message", { "msg" : btn.value});
        socket.on("message", function(obj) {
              ul.innerHTML=`
                ${obj}
             `
        });
   var XMLHttp=new XMLHttpRequest()
      // alert(XMLHttp)
    XMLHttp.open("get","/data",true)
    XMLHttp.onreadystatechange=function(){
        if(XMLHttp.readyState==4&&XMLHttp.status==200){
            ul.innerHTML=XMLHttp.responseText
        }
    }
    XMLHttp.send()
    </script>
</body>
</html>